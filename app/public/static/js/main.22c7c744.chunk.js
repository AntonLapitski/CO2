(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(e,a,t){e.exports=t(456)},209:function(e,a,t){},450:function(e,a,t){},454:function(e,a,t){},456:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),i=t(57),c=t.n(i),s=t(30),l=t(169),o=t(171),d=t(10),m=t(15),u="".concat("LOGIN_FORM","__UPDATE"),h={deviceId:"",errors:[],isLoading:!1},p=t(48),g=t.n(p),b=t(176),v=t(74),f=t(45),E=t.n(f),y="http://mastery.local",C={authUrl:"".concat(y,":").concat(8090,"/auth"),updateMainChartUrl:"".concat(y,":").concat(8090,"/contact"),updateMiniChartsUrl:"".concat(y,":").concat(8090,"/widget")},O="".concat("CURRENT_DEVICE","__SET"),j="".concat("CURRENT_DEVICE","__UPDATE"),N="".concat("CURRENT_DEVICE","__RESET"),x="".concat("DATE_PICKER","__UPDATE"),I={from:new Date(+new Date-3600).toISOString(),to:(new Date).toISOString()},_="".concat("MAIN_CHART","__INIT"),D="".concat("MAIN_CHART","__UPDATE"),T="".concat("MAIN_CHART","__LOADING"),w="".concat("MAIN_CHART","__STOP_LOADING"),A=function(e){var a=e.chart,t=e.lablesAxesX,n=e.dataAxesY;return a.data.labels=t,a.data.datasets[0].data=n,a.update(),Object(m.a)({},e)},S=function(e,a){var t=e.chart.chart,n=a.lablesAxesX,r=a.dataAxesY;return t.data.labels=n,t.data.datasets[0].data=r,t.update(),Object(m.a)({chart:t},a)},k={chart:null,deviceLogs:{},isLoading:!1},L="".concat("MINI_CHART_TEMP","__INIT"),M="".concat("MINI_CHART_TEMP","__UPDATE"),P={chart:null,lablesAxesX:[],dataAxesY:[],measure:"\xb0C"},F="".concat("MINI_CHART_HUMIDITY","__INIT"),H="".concat("MINI_CHART_HUMIDITY","__UPDATE"),R={chart:null,lablesAxesX:[],dataAxesY:[],maesure:"g/m^3"},V="".concat("MINI_CHART_CO2","__INIT"),Y="".concat("MINI_CHART_CO2","__UPDATE"),U={chart:null,lablesAxesX:[],dataAxesY:[],measure:"ppm"},X="".concat("MINI_CHARTS_DEMON","__UPDATE"),B="".concat("MINI_CHARTS_DEMON","__DELETE"),W=t(75),J=Object(s.combineReducers)({loginForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case u:return console.log(Object(m.a)({},n)),{deviceId:n.deviceId,errors:n.errors,isLoading:n.isLoading};default:return e}},miniChartsDemon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case X:return n;case B:return Object(W.clearInterval)(e),n;default:return e}},device:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case O:case j:return Object(m.a)({},n);case N:return n;default:return e}},datePicker:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case x:return Object(m.a)({},n);default:return e}},mainChart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case _:return{chart:n,deviceLogs:{},isLoading:!1};case T:return Object(m.a)({},e,{isLoading:!0});case w:return Object(m.a)({},e,{isLoading:!1});case D:return function(e,a){var t=e.chart;try{var n=a.temperature,r=a.humidity,i=a.CO2;return t.data.labels=n.axesX,t.data.datasets[0].data=n.axesY,t.data.datasets[1].data=r.axesY,t.data.datasets[2].data=i.axesY,t.update(),Object(m.a)({chart:t},a,{isLoading:!1})}catch(c){return Object(m.a)({chart:t},e,{isLoading:!1})}}(e,n);default:return e}},miniChartTemp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case L:return A(n);case M:return S(e,n);default:return e}},miniChartHumidity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case F:return A(n);case H:return S(e,n);default:return e}},miniChartCO2:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case V:return A(n);case Y:return S(e,n);default:return e}}}),G=t(3),K=t(4),$=t(6),q=t(5),z=t(7),Q=t(458),Z=t(460),ee=t(461),ae=t(177),te=t(459);var ne=Object(d.b)(function(e){return{device:e.device}},{})(function(e){var a=e.component,t=e.device,n=Object(ae.a)(e,["component","device"]);return r.a.createElement(ee.a,Object.assign({},n,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(te.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))}),re=t(11),ie=function(e){function a(e){var t;return Object(G.a)(this,a),(t=Object($.a)(this,Object(q.a)(a).call(this,e))).state={visible:!0},t.onDismiss=t.onDismiss.bind(Object(re.a)(Object(re.a)(t))),t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"onDismiss",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){var e=this.props,a=e.color,t=e.text,n=this.state.visible;return r.a.createElement("div",null,n?r.a.createElement("div",{className:"alert alert-".concat(a," alert-dismissible fade show"),role:"alert"},r.a.createElement("strong",null,t),r.a.createElement("button",{onClick:this.onDismiss,type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))):null)}}]),a}(n.Component),ce=function(e){function a(){var e,t;Object(G.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(t=Object($.a)(this,(e=Object(q.a)(a)).call.apply(e,[this].concat(i)))).state={deviceId:""},t.renderErrors=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return console.log({errors:e}),e.map(function(e,a){return r.a.createElement(ie,{key:a,color:"danger",text:"".concat(e)})})},t.handlerInputDeviceId=function(e){var a=e.target.value;t.setState({deviceId:a}),t.props.updateLoginForm({value:a,errors:[]})},t.handlerSubmit=function(e){e.preventDefault();var a=t.state.deviceId;t.props.findDeviceById(a)},t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"render",value:function(){var e=this.state.deviceId,a=this.props.loginForm,t=a.isLoading,n=a.errors,i=0===n.length?"form-control":"form-control  is-invalid";return r.a.createElement("form",{onSubmit:this.handlerSubmit,className:"signin-form"},r.a.createElement("div",{className:"signin-form__logo"},r.a.createElement("i",{className:"fa fa-user-circle fa-4x","aria-hidden":"true"})," "),this.renderErrors(n),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputDeviceId"},"Entry device id:"),r.a.createElement("input",{id:"inputDeviceId",name:"deviceId",type:"text",className:"".concat(i),"aria-describedby":"emailHelp",placeholder:"Device id",maxLength:"50",value:e,onChange:this.handlerInputDeviceId}),r.a.createElement("div",{className:"invalid-feedback"},"Please provide a valid device Id"),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your data")),r.a.createElement("button",{disabled:t,className:"btn btn-success col-12",type:"submit"},"Search device"))}}]),a}(n.Component);var se=Object(d.b)(function(e){return{loginForm:e.loginForm}},{findDeviceById:function(e){return function(){var a=Object(v.a)(g.a.mark(function a(t){var n,r,i;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:u,payload:{deviceId:e,errors:[],isLoading:!0}}),(n=new FormData).append("deviceId","".concat(e)),a.prev=3,a.next=6,E()({method:"post",url:C.authUrl,data:n});case 6:r=a.sent,console.log(r),(i=r.data.device.deviceId)?(localStorage.setItem("device",JSON.stringify(r.data.device)),t({type:O,payload:{deviceId:i,errors:[],isLoading:!1}})):t({type:u,payload:{deviceId:e,errors:Object(b.a)(r.data.errors),isLoading:!1}}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(3),t({type:u,payload:{deviceId:e,errors:[a.t0],isLoading:!1}});case 15:case"end":return a.stop()}},a,this,[[3,12]])}));return function(e){return a.apply(this,arguments)}}()},updateLoginForm:function(e){return function(a){var t=e.deviceId,n=e.errors;a({type:u,payload:{deviceId:t,errors:n}})}}})(ce),le=(t(209),function(e){function a(){var e,t;Object(G.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object($.a)(this,(e=Object(q.a)(a)).call.apply(e,[this].concat(r)))).state={deviceId:""},t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"componentDidMount",value:function(){this.props.checkDeviceLocaly()}},{key:"render",value:function(){var e=this.props.device;return r.a.createElement("div",null,e?r.a.createElement(te.a,{to:"/dashboard"}):r.a.createElement("div",{className:"container signin"},r.a.createElement(se,null)))}}]),a}(n.Component));var oe=Object(d.b)(function(e){return{device:e.device}},{checkDeviceLocaly:function(){return function(e){var a=JSON.parse(localStorage.getItem("device"));if(a){var t=a.deviceId;e({type:O,payload:{deviceId:t}})}}}})(le),de=t(457),me=Object(d.b)(null,{resetCurrentDevice:function(){return function(e){localStorage.removeItem("device"),e({type:N,payload:null})}}})(function(e){return r.a.createElement("header",null,r.a.createElement(de.a,{to:"/dashboard"},r.a.createElement("h2",{className:"logo"},"Dashboard")),r.a.createElement("div",{className:"notifications"},r.a.createElement("i",{className:"fa fa-bell fa-lg","aria-hidden":"true"}),r.a.createElement("span",{className:"notifications_counter"},"12")),r.a.createElement("div",{className:"user-profile"},r.a.createElement("i",{className:"fa fa-user-circle fa-2x","aria-hidden":"true"}),r.a.createElement("div",{className:"profile__menu"},r.a.createElement("div",{className:"profile__menu-item"},r.a.createElement(de.a,{to:"/dashboard"},r.a.createElement("i",{className:"fa fa-user fa-sm","aria-hidden":"true"})," Profile")),r.a.createElement("hr",{className:"profile__menu-hr"}),r.a.createElement("div",{className:"profile__menu-item"},r.a.createElement(de.a,{to:"/notifications"},r.a.createElement("i",{className:"fa fa-envelope","aria-hidden":"true"})," Notifications"," ",r.a.createElement("span",{className:"badge badge-danger"}," 12+"))),r.a.createElement("hr",{className:"profile__menu-hr"}),r.a.createElement("div",{className:"profile__menu-item"},r.a.createElement("label",{onClick:e.resetCurrentDevice},r.a.createElement("i",{className:"fa fa-microchip fa-sm","aria-hidden":"true"})," Change device id")))))}),ue=t(31);var he=function(e){var a=e.cardName,t=e.handleToggle,n=e.iconClassName,i=e.settings;return r.a.createElement("div",{className:"param-card__header"},r.a.createElement("div",{className:"param-name"},r.a.createElement("i",{className:n,"aria-hidden":"true"})," ".concat(a)),i?r.a.createElement("i",{onClick:t,className:"fa fa-cog fa-lg","aria-hidden":"true"}):null)},pe=function(e){function a(){return Object(G.a)(this,a),Object($.a)(this,Object(q.a)(a).apply(this,arguments))}return Object(z.a)(a,e),Object(K.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this.props.handleToggle,className:"param-card__settings"},r.a.createElement("button",{className:"btn btn-light btn-sm selected"},"\xb0C"),r.a.createElement("button",{className:"btn btn-light btn-sm"},"K"),r.a.createElement("button",{className:"btn btn-light btn-sm"},"F"),r.a.createElement("i",{className:"fa fa-times ml-auto","aria-hidden":"true"}))}}]),a}(n.Component),ge=function(e){function a(e){var t;return Object(G.a)(this,a),(t=Object($.a)(this,Object(q.a)(a).call(this,e))).processingData=function(){var e=t.props.data,a={currentValue:"0",value:"N/A",arrowStyle:""},n=e[e.length-1],r=n-e[e.length-2];return a.currentValue="".concat(n),r>0?(a.value=" +".concat(r),a.arrowStyle="fa fa-arrow-up"):r<0&&(a.value=" ".concat(r),a.arrowStyle="fa fa-arrow-down"),a},t.updateCurrentDynamic=function(e){var a=e.value,n=e.arrowStyle;t.setState({value:a,arrowStyle:n})},t.state={value:"",arrowStyle:""},t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"componentDidMount",value:function(){var e=this.processingData();this.updateCurrentDynamic(e)}},{key:"render",value:function(){var e=this.processingData(),a=e.value,t=e.arrowStyle,n=e.currentValue,i=this.props.measure,c="g/m^3"===i||"ppm"===i?"measure-sm":"measure-md";return r.a.createElement("div",{className:"param-card__current-info",onClick:function(){new Audio("sounds/co2_sound_danger.mp3").play()}},r.a.createElement("div",{className:"current-info__value"},n,r.a.createElement("span",{className:c},"".concat(i))),r.a.createElement("div",{className:"current-info__dynamic"},r.a.createElement("span",{className:"dynamic_value"},r.a.createElement("i",{className:t,"aria-hidden":"true"}),"".concat(a))))}}]),a}(n.Component);var be=function(e){var a=e.isExpand?"":"none";return r.a.createElement("div",{className:"".concat(a," mini-chart__container")},r.a.createElement("canvas",{id:e.chartId}))},ve=function(e){function a(e){var t;return Object(G.a)(this,a),(t=Object($.a)(this,Object(q.a)(a).call(this,e))).toggle=function(){console.log(Object(re.a)(Object(re.a)(t)));var e=t.props.isExpand;console.log({isExpand:e}),t.props.toggleAction()},t.arrowStyleUp="fa fa-angle-up fa-lg",t.arrowStyleDown="fa fa-angle-down fa-lg",t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"render",value:function(){var e=this.props.isExpand,a=this.arrowStyleUp,t=this.arrowStyleDown;return r.a.createElement("div",{onClick:this.toggle,className:"param-card_toggle"},r.a.createElement("i",{className:e?a:t,"aria-hidden":"true"}))}}]),a}(n.Component),fe={type:"line",data:{labels:[],datasets:[{label:"Temp",borderColor:"rgb(255, 255, 219)",data:[],borderWidth:1,pointRadius:2}]},options:{legend:{display:!1},scales:{yAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{display:!1}}],xAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{display:!1}}]}}},Ee=function(e){function a(e){var t;return Object(G.a)(this,a),(t=Object($.a)(this,Object(q.a)(a).call(this,e))).handlerSettingsToggle=function(){t.setState({isExpandSettings:!t.state.isExpandSettings})},t.handlerParamCardToggle=function(){t.setState({isExpand:!t.state.isExpand})},t.chartId="miniChartTemp",t.state={cardName:"Temp",measure:"\xb0C",chart:null,isExpandSettings:!1,isExpand:!1},t.handlerParamCardToggle=t.handlerParamCardToggle.bind(Object(re.a)(Object(re.a)(t))),t.handlerSettingsToggle=t.handlerSettingsToggle.bind(Object(re.a)(Object(re.a)(t))),t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"componentDidMount",value:function(){var e=document.getElementById(this.chartId).getContext("2d"),a=new ue.Chart(e,fe);this.props.initChart({chart:a,lablesAxesX:[1,2,3,4,5],dataAxesY:[1,1,1,1,1],measure:this.state.measure}),this.setState({chart:a})}},{key:"render",value:function(){var e=this.state,a=e.isExpandSettings,t=e.isExpand,n=e.cardName,i=this.props.miniChartTemp,c=i.measure,s=i.dataAxesY;return r.a.createElement("div",{className:"col-md-12 param-card yellow"},a?r.a.createElement(pe,{handleToggle:this.handlerSettingsToggle}):r.a.createElement("div",null,r.a.createElement(he,{handleToggle:this.handlerSettingsToggle,cardName:n,iconClassName:"fa fa-thermometer-half fa-sm",settings:!0}),r.a.createElement(ge,{data:s,measure:c})," "),r.a.createElement(be,{chartId:this.chartId,isExpand:t}),r.a.createElement(ve,{toggleAction:this.handlerParamCardToggle,isExpand:t}))}}]),a}(n.Component);var ye=Object(d.b)(function(e){return{miniChartTemp:e.miniChartTemp}},{initChart:function(e){return function(a){var t=e.chart,n=e.lablesAxesX,r=e.dataAxesY,i=e.measure;a({type:L,payload:{chart:t,lablesAxesX:n,dataAxesY:r,measure:i}})}}})(Ee),Ce=function(e){function a(){return Object(G.a)(this,a),Object($.a)(this,Object(q.a)(a).apply(this,arguments))}return Object(z.a)(a,e),Object(K.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this.props.handleToggle,className:"param-card__settings"},r.a.createElement("button",{className:"btn btn-light btn-sm selected"},"g/m^3"),r.a.createElement("button",{className:"btn btn-light btn-sm"},"%"),r.a.createElement("i",{className:"fa fa-times ml-auto","aria-hidden":"true"}))}}]),a}(n.Component),Oe={type:"line",data:{labels:[],datasets:[{label:"Humidity",backgroundColor:"rgb(51, 185, 219, 0.418)",borderColor:"rgb(255, 255, 219)",data:[],borderWidth:1,pointRadius:2}]},options:{legend:{display:!1},scales:{yAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{display:!1}}],xAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{display:!1}}]}}},je=function(e){function a(e){var t;return Object(G.a)(this,a),(t=Object($.a)(this,Object(q.a)(a).call(this,e))).handlerSettingsToggle=function(){t.setState({isExpandSettings:!t.state.isExpandSettings})},t.handlerParamCardToggle=function(){t.setState({isExpand:!t.state.isExpand})},t.chartId="miniChartHumidity",t.state={cardName:"Humidity",measure:"g/m^3",chart:null,isExpandSettings:!1,isExpand:!1},t.handlerParamCardToggle=t.handlerParamCardToggle.bind(Object(re.a)(Object(re.a)(t))),t.handlerSettingsToggle=t.handlerSettingsToggle.bind(Object(re.a)(Object(re.a)(t))),t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"componentDidMount",value:function(){var e=document.getElementById(this.chartId).getContext("2d"),a=new ue.Chart(e,Oe);this.props.initChart({chart:a,lablesAxesX:[1],dataAxesY:[1],measure:this.state.measure}),this.setState({chart:a})}},{key:"render",value:function(){var e=this.state,a=e.isExpandSettings,t=e.isExpand,n=e.cardName,i=this.props.miniChartHumidity,c=i.measure,s=i.dataAxesY;return r.a.createElement("div",{className:"col-md-12 param-card blue"},a?r.a.createElement(Ce,{handleToggle:this.handlerSettingsToggle}):r.a.createElement("div",null,r.a.createElement(he,{handleToggle:this.handlerSettingsToggle,cardName:n,iconClassName:"fa fa-tint fa-sm",settings:!0}),r.a.createElement(ge,{data:s,measure:c})," "),r.a.createElement(be,{chartId:this.chartId,isExpand:t}),r.a.createElement(ve,{toggleAction:this.handlerParamCardToggle,isExpand:t}))}}]),a}(n.Component);var Ne=Object(d.b)(function(e){return{miniChartHumidity:e.miniChartHumidity}},{initChart:function(e){return function(a){var t=e.chart,n=e.lablesAxesX,r=e.dataAxesY,i=e.measure;a({type:F,payload:{chart:t,lablesAxesX:n,dataAxesY:r,measure:i}})}}})(je),xe={type:"line",data:{labels:[],datasets:[{label:"CO2",backgroundColor:"rgb(239, 93, 93, 0.6)",borderColor:"rgb(255, 255, 219)",data:[],borderWidth:1,pointRadius:2}]},options:{legend:{display:!1},scales:{yAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{display:!1}}],xAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{display:!1}}]}}},Ie=function(e){function a(e){var t;return Object(G.a)(this,a),(t=Object($.a)(this,Object(q.a)(a).call(this,e))).handlerParamCardToggle=function(){console.log("handlerParamCardToggle"),t.setState({isExpand:!t.state.isExpand})},t.chartId="miniChartCO2",t.state={cardName:"CO2",measure:"ppm",chart:null,isExpand:!1},t.handlerParamCardToggle=t.handlerParamCardToggle.bind(Object(re.a)(Object(re.a)(t))),t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"componentDidMount",value:function(){var e=document.getElementById(this.chartId).getContext("2d"),a=new ue.Chart(e,xe);this.props.initChart({chart:a,lablesAxesX:[1,2,3,4,5],dataAxesY:[1,1,1,1,1],measure:this.state.measure}),this.setState({chart:a})}},{key:"render",value:function(){var e=this.state,a=e.isExpand,t=e.cardName,n=this.props.miniChartCO2,i=n.measure,c=n.dataAxesY,s=a?"":"none";return r.a.createElement("div",{className:"col-md-12 param-card upper"},r.a.createElement(he,{cardName:t,iconClassName:"fa fa-cloud fa-sm",handleToggle:this.handlerSettingsToggle,settings:!1}),r.a.createElement(ge,{data:c,measure:i}),r.a.createElement("div",{className:"".concat(s," mini-chart__container")},r.a.createElement("canvas",{id:this.chartId})),r.a.createElement(ve,{toggleAction:this.handlerParamCardToggle,isExpand:a}))}}]),a}(n.Component);var _e=Object(d.b)(function(e){return{miniChartCO2:e.miniChartCO2}},{initChart:function(e){return function(a){var t=e.chart,n=e.lablesAxesX,r=e.dataAxesY,i=e.measure;a({type:V,payload:{chart:t,lablesAxesX:n,dataAxesY:r,measure:i}})}}})(Ie);function De(e,a){var t=new FormData;t.append("deviceId","".concat(e)),E()({method:"post",url:C.updateMiniChartsUrl,data:t}).then(function(e){console.log({response:e});var t=null;try{t=e.data.device.deviceData,a({type:M,payload:{lablesAxesX:t.temperature.axesX,dataAxesY:t.temperature.axesY,measure:"\xb0C"}}),a({type:H,payload:{lablesAxesX:t.humidity.axesX,dataAxesY:t.humidity.axesY,measure:"%"}}),a({type:Y,payload:{lablesAxesX:t.cO2.axesX,dataAxesY:t.cO2.axesY,measure:"ppm"}})}catch(n){console.log("hotUpdateMiniCharts ",{error:n})}})}var Te=function(e){function a(){return Object(G.a)(this,a),Object($.a)(this,Object(q.a)(a).apply(this,arguments))}return Object(z.a)(a,e),Object(K.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.deviceId;this.props.runUpdateMiniCharts(e)}},{key:"componentWillUnmount",value:function(){this.props.deleteDemon(this.props.miniChartsDemon)}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ye,null),r.a.createElement(Ne,null),r.a.createElement(_e,null))}}]),a}(n.Component);var we=Object(d.b)(function(e){return{miniChartsDemon:e.miniChartsDemon,deviceId:e.device.deviceId}},{runUpdateMiniCharts:function(e){return function(){var a=Object(v.a)(g.a.mark(function a(t){var n;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:setTimeout(function(){De(e,t)},10),n=Object(W.setInterval)(function(){De(e,t)},15e3),t({type:X,payload:n});case 3:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},deleteDemon:function(e){return function(a){a({type:B,payload:e})}}})(Te),Ae=function(e,a){return function(t){t({type:T});var n=new FormData;if(n.append("deviceId","".concat(e)),a){var r=a.fromDate,i=a.toDate;r=new Date(r).toISOString(),i=new Date(i).toISOString(),n.append("from","".concat(r)),n.append("to","".concat(i))}E()({method:"post",url:C.updateMainChartUrl,data:n}).then(function(e){var a=e.data.device.deviceData;t({type:D,payload:a})}).catch(function(e){t({type:w}),console.log({error:e})})}},Se=t(109),ke=(t(294),function(e){function a(e){var t;Object(G.a)(this,a),(t=Object($.a)(this,Object(q.a)(a).call(this,e))).handleSearchButton=function(){var e=t.props,a=e.getLogsFromTo,n=e.deviceId,r=t.state;a(n,{fromDate:r.startDate,toDate:r.endDate})},t.handleChangeStart=function(e){t.setState({startDate:e,endDate:e})},t.handleChangeEnd=function(e){t.setState({endDate:e})};var n=new Date,r=new Date;return t.state={startDate:n,endDate:r},t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-chart__container mb-1"},r.a.createElement("div",{className:"data-search__container"},r.a.createElement(Se.a,{selected:this.state.startDate,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"yyyy-MM-dd h:mm aa",startDate:this.state.startDate,endDate:this.state.endDate,onChange:this.handleChangeStart,className:"form-control form-control-sm mr-2",disabled:this.props.isLoading}),r.a.createElement(Se.a,{selected:this.state.endDate,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"yyyy-MM-dd h:mm aa",startDate:this.state.startDate,endDate:this.state.endDate,onChange:this.handleChangeEnd,className:"form-control form-control-sm",disabled:this.props.isLoading}),r.a.createElement("button",{className:"btn btn-success btn-sm ml-3",onClick:this.handleSearchButton,disabled:this.props.isLoading},"Search")))}}]),a}(n.Component));var Le=Object(d.b)(function(e){return{deviceId:e.device.deviceId,isLoading:e.mainChart.isLoading}},{getLogsFromTo:Ae})(ke),Me={type:"line",chartLines:{temperatyre:{id:0,isVisible:!0,color:"#FF6900"},humidity:{id:1,isVisible:!0,color:"#0693E3"},CO2:{id:2,isVisible:!0,color:"#EB144C"}},data:{labels:[1,2,4,5,6,7,8],datasets:[{label:"\xb0C",backgroundColor:"transparent",borderColor:"#FF6900",data:[3,3,3,3,3,3,3],borderWidth:2,pointRadius:2},{label:"Humidity",backgroundColor:"transparent",borderColor:"#0693E3",data:[2,2,2,2,2,2,2],borderWidth:2,pointRadius:2},{label:"CO2",backgroundColor:"transparent",borderColor:"#EB144C",data:[1,1,1,1,1,1,1],borderWidth:2,pointRadius:2}]},options:{legend:{display:!1},scales:{yAxes:[{gridLines:{},ticks:{}}],xAxes:[{gridLines:{},ticks:{}}]}}},Pe=t(174),Fe=function(e){function a(){var e,t;Object(G.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object($.a)(this,(e=Object(q.a)(a)).call.apply(e,[this].concat(r)))).state={background:"#fff",colors:["#FF6900","#FCB900","#00D084","#0693E3","#EB144C","#F78DA7","#9900EF","#193193"]},t.handleChangeComplete=function(e){t.setState({background:e.hex}),t.props.colorDidChange(e)},t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"render",value:function(){return r.a.createElement(Pe.TwitterPicker,{triangle:"top-right",color:this.state.background,colors:this.state.colors,onChangeComplete:this.handleChangeComplete})}}]),a}(n.Component),He=Object(d.b)(null,null)(Fe),Re=function(e){function a(){var e,t;Object(G.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object($.a)(this,(e=Object(q.a)(a)).call.apply(e,[this].concat(r)))).iconStyles={temperatyre:"fa fa-thermometer-half fa-lg ml-2",humidity:"fa fa-tint ml-2",CO2:"fa fa-cloud ml-2"},t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"render",value:function(){var e=this.props,a=e.colorDidChange,t=e.toggleChartVisible,n=e.isVisible,i=e.type,c=e.color;return r.a.createElement("div",{className:"ml-3 chart-settings__container"},r.a.createElement("div",{className:"line_settings-color",style:{background:c}},r.a.createElement("div",{className:"color-picker none"},r.a.createElement(He,{colorDidChange:function(e){return a(e,i)}}))),r.a.createElement("span",{onClick:function(){return t(i)}},n?r.a.createElement("i",{className:this.iconStyles["".concat(i)],"aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-eye-slash ml-2","aria-hidden":"true"})))}}]),a}(n.Component),Ve=function(e){function a(e){var t;return Object(G.a)(this,a),(t=Object($.a)(this,Object(q.a)(a).call(this,e))).handlerChangeColor=function(e,a){var n=e.hex,r=t.state,i=r.chart,c=r.chartLines,s=c[a].id;i.data.datasets[s].borderColor=n,c[a].color=n,i.update(),t.setState({chartLines:c})},t.handlerToggleChartVisible=function(e){var a=t.state,n=a.chart,r=a.chartLines,i=r[e],c=i.id,s=i.isVisible;n.data.datasets[c].hidden=s,n.update(),r[e].isVisible=!s,t.setState({chartLines:r})},t.chartId="mainChart",t.state={chart:null,chartLines:Me.chartLines},t.handlerChangeColor=t.handlerChangeColor.bind(Object(re.a)(Object(re.a)(t))),t.handlerToggleChartVisible=t.handlerToggleChartVisible.bind(Object(re.a)(Object(re.a)(t))),t}return Object(z.a)(a,e),Object(K.a)(a,[{key:"componentDidMount",value:function(){var e=document.getElementById(this.chartId).getContext("2d"),a=new ue.Chart(e,Me);this.setState({chart:a}),this.props.initChart(a)}},{key:"render",value:function(){var e=this.state.chartLines,a=this.props.isLoading;return r.a.createElement("div",null,r.a.createElement("div",{className:"main-chart"},r.a.createElement("div",{className:"main-chart__container"},a?r.a.createElement("div",{className:"content_loader"},r.a.createElement("i",{className:"fas fa-sync fa-2x mr-3"}),r.a.createElement("span",{className:"content-loader-text"},"Loading...")):null,r.a.createElement("div",{className:"main-chart__settings"},r.a.createElement(Re,{type:"temperatyre",color:e.temperatyre.color,isVisible:e.temperatyre.isVisible,colorDidChange:this.handlerChangeColor,toggleChartVisible:this.handlerToggleChartVisible}),r.a.createElement(Re,{type:"humidity",color:e.humidity.color,isVisible:e.humidity.isVisible,colorDidChange:this.handlerChangeColor,toggleChartVisible:this.handlerToggleChartVisible}),r.a.createElement(Re,{type:"CO2",color:e.CO2.color,isVisible:e.CO2.isVisible,colorDidChange:this.handlerChangeColor,toggleChartVisible:this.handlerToggleChartVisible})),r.a.createElement("canvas",{id:this.chartId}))))}}]),a}(n.Component);var Ye=Object(d.b)(function(e){return{deviceId:e.device.deviceId,isLoading:e.mainChart.isLoading}},{initChart:function(e){return function(a){a({type:_,payload:e})}},getLogsFromTo:Ae})(Ve),Ue=function(e){function a(){return Object(G.a)(this,a),Object($.a)(this,Object(q.a)(a).apply(this,arguments))}return Object(z.a)(a,e),Object(K.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(me,null),r.a.createElement("div",{className:"row"},r.a.createElement(we,null),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(Le,null),r.a.createElement(Ye,null))))}}]),a}(n.Component);var Xe=Object(d.b)(function(e){return{deviceId:e.device.deviceId,isLoading:e.mainChart.isLoading}},{})(Ue);t(450);var Be=function(e){var a=new Date;return r.a.createElement("div",{className:"container"},r.a.createElement(me,null),r.a.createElement("div",{className:"row"},r.a.createElement(we,null),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"notifications-container"},r.a.createElement("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert"},"Temperature was upper norm! ","".concat(a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"alert alert-info alert-dismissible fade show",role:"alert"},"Temperature was upper norm! ","".concat(a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"alert alert-success alert-dismissible fade show",role:"alert"},"Temperature was upper norm! ","".concat(a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")))))))},We=(t(452),t(454),function(e){function a(){return Object(G.a)(this,a),Object($.a)(this,Object(q.a)(a).apply(this,arguments))}return Object(z.a)(a,e),Object(K.a)(a,[{key:"render",value:function(){return r.a.createElement(Q.a,null,r.a.createElement(Z.a,null,r.a.createElement(ne,{exact:!0,path:"/",component:Xe}),r.a.createElement(ee.a,{exact:!0,path:"/signin",component:oe}),r.a.createElement(ne,{exact:!0,path:"/dashboard",component:Xe}),r.a.createElement(ne,{exact:!0,path:"/notifications",component:Be}),r.a.createElement(ee.a,{component:oe})))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Je=Object(s.createStore)(J,Object(l.composeWithDevTools)(Object(s.applyMiddleware)(o.a)));c.a.render(r.a.createElement(d.a,{store:Je},r.a.createElement(We,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[178,2,1]]]);
//# sourceMappingURL=main.22c7c744.chunk.js.map